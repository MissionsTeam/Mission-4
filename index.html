<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FixIt - Let's Fix It!</title>
    <link rel="stylesheet" href="Assets/CSS/index.css" />
    <link rel="stylesheet" href="Assets/CSS/globals.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- SKIP LINK -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div class="page-container">
      <!-- HEADER -->
      <header class="header">
        <div class="header-inner">
          <img src="Assets/Images/Logo.png" alt="FixIt Logo" class="logo" />

          <form
            class="search-bar"
            action="/search"
            role="search"
            aria-label="Search FixIt"
          >
            <input
              type="text"
              name="q"
              placeholder="Search FixIt"
              aria-label="Search input"
            />
            <button type="submit">
              <i class="fa fa-search" aria-hidden="true"></i>
              <span class="sr-only">Search</span>
            </button>
          </form>

          <!-- Desktop Navigation -->
          <nav class="nav-buttons">
            <div class="nav-dropdown">
              <button class="nav-btn dropdown-toggle">
                Menu <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-menu">
                <a href="#getting-started">Getting Started</a>
                <a href="#our-mission">Our Mission</a>
                <a href="testimonials.html">Community Voice</a>
                <a href="login.html">myFixIt</a>
              </div>
            </div>
            <a href="login.html" class="nav-btn login">myFixIt</a>
          </nav>

          <!-- Mobile Navigation -->
          <div class="mobile-nav">
            <div class="hamburger" onclick="toggleMobileMenu()">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>

        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
          <a href="#getting-started" onclick="closeMobileMenu()"
            >Getting Started</a
          >
          <a href="#our-mission" onclick="closeMobileMenu()">Our Mission</a>
          <a href="testimonials.html" onclick="closeMobileMenu()"
            >Community Voice</a
          >
          <a href="login.html" onclick="closeMobileMenu()">myFixIt</a>
        </div>
      </header>

      <!-- MAIN BODY -->
      <div class="main-body">
        <!-- LEFT BODY -->
        <div class="body-left"></div>

        <!-- RIGHT BODY + SKIP LINK -->
        <div class="body-right" id="main-content">
          <!-- HERO SECTION -->
          <section class="hero">
            <div class="hero-overlay"></div>
            <div class="hero-content">
              <h1>Welcome to FixIt.</h1>
              <h2>Your Voice Matters.</h2>
              <p class="hero-quote">
                TƒÅ TƒÅtou Taone, TƒÅ TƒÅtou Kawenga <br />
                <em>Our City, Our Responsibility</em>
              </p>
            </div>
          </section>

          <!-- INTRODUCTION SECTION -->
          <section class="section-card introduction">
            <h2>
              <i class="fa-solid fa-handshake-angle"></i> Uh-oh... Something's
              broken? Let's FixIt!
            </h2>
            <p>
              Overflowing bins? Flickering streetlights? Graffiti where it
              doesn't belong? We've all seen it BUT now you can actually do
              something about it.
            </p>
            <p>
              <strong>FixIt</strong> is your fast and simple way to report
              issues in your neighbourhood.
            </p>
            <p>
              No more frustrating phone calls. Just snap a photo, tap your
              location, and send. Easy.
            </p>

            <h2><i class="fa-solid fa-heart"></i> FixIt is all about:</h2>
            <ul class="list-basic">
              <li>
                <strong>Simple Solutions</strong> - No fuss problem solving
              </li>
              <li>
                <strong>Kaitiakitanga</strong> - Caring for our communities and
                our planet
              </li>
              <li>
                <strong>Contribution</strong> - The belief that
                <strong>anyone</strong> can make a difference
              </li>
            </ul>
          </section>

          <!-- GETTING STARTED -->
          <section class="section-card" id="getting-started">
            <h2><i class="fa-solid fa-heart"></i> Getting Started</h2>
            <p>
              Ready to make a difference in your community? Here's how to get
              started:
            </p>
            <ol class="list-ordered">
              <li>
                Download the <strong>FixIt</strong> app or use our website
              </li>
              <li>Take a photo of the issue you've spotted</li>
              <li>Add your location and description</li>
              <li>Submit your report and help make change happen</li>
            </ol>
            <a class="cta-btn" href="login.html">Submit A Report</a>
          </section>

          <!-- MISSION -->
          <section class="section-card" id="our-mission">
            <h2><i class="fa-solid fa-heart"></i> Our Mission</h2>
            <p>
              <strong>Kaitiakitanga</strong> is a MƒÅori principle that embodies
              guardianship, protection, and sustainable care for the
              environment. Rooted in a deep spiritual connection to the land,
              sea, and sky, it emphasizes the responsibility to preserve and
              respect the natural world for future generations.
            </p>
            <p>
              <strong>Together, we can all be Kaitiaki!</strong>
              <em>(A custodian of your community.)</em>
            </p>
            <p>
              We believe in kaitiakitanga ‚Äî looking after our shared spaces with
              care and respect. This website was made to help you help your
              community.
            </p>
          </section>

          <!-- PRIVACY POLICY -->
          <section class="section-card privacy-section">
            <h2><i class="fa-solid fa-heart"></i> Privacy Policy</h2>
            <p>
              <strong>Your privacy is important to us.</strong> This policy
              explains what information we collect, why we collect it, and how
              we use it.
            </p>
            <p>
              Any information collected‚Äîlocation, images, and contact
              details‚Äîwill not be shared without your permission.
            </p>
            <p>
              You can read the privacy policy
              <a href="privacy.html" class="inline-link">here</a> at any time.
            </p>
            <p><strong>Want to know the impact we are making?</strong></p>

            <a class="cta-btn" href="testimonials.html" id="community-voice"
              >Community Voice</a
            >
          </section>
        </div>

        <!-- .body-right -->
      </div>

      <!-- .main-body -->

      <!-- FOOTER -->
      <footer class="footer" id="contact">
        <div class="footer-inner">
          <!-- LEFT SECTION -->
          <div class="section-left">
            <div class="footer-title">
              <i class="fa-solid fa-location-dot"></i>
              <span>Visit Us</span>
            </div>
            <p class="footer-address">
              Raphoe House Level 1/8<br />
              Gloucester Park Road,<br />
              Onehunga, Auckland 1061
            </p>
          </div>

          <!-- CENTER SECTION -->
          <div class="section-center">
            <div class="footer-title">
              <span>Need Help? Get In Touch</span>
            </div>
            <div class="contact-buttons">
              <button type="button" class="contact-btn">
                <i class="fa-solid fa-phone"></i>
                <span>Phone</span>
              </button>
              <button type="button" class="contact-btn">
                <i class="fa-solid fa-envelope"></i>
                <span>Email</span>
              </button>
            </div>
          </div>

          <!-- RIGHT SECTION -->
          <div class="section-right">
            <div class="footer-title">
              <i class="fa-solid fa-share-nodes"></i>
              <span>Follow Us</span>
            </div>
            <div class="social-buttons">
              <a class="social-btn" href="#"
                ><i class="fa-brands fa-x-twitter"></i
              ></a>
              <a class="social-btn" href="#"
                ><i class="fa-brands fa-instagram"></i
              ></a>
              <a class="social-btn" href="#"
                ><i class="fa-brands fa-youtube"></i
              ></a>
              <a class="social-btn" href="#"
                ><i class="fa-brands fa-linkedin-in"></i
              ></a>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- üåç Location Permission Modal -->
    <div id="locationModal" class="modal-overlay">
      <div class="modal-box">
        <h3>üåç Can We Use Your Location?</h3>
        <p>
          This helps us show your current area and personalize your FixIt
          experience.
        </p>
        <div class="modal-buttons">
          <button onclick="allowLocation()">Allow</button>
          <button onclick="closeModal()">No thanks</button>
        </div>
      </div>
    </div>

    <<!-- üìç MAP MODAL POPUP -->
    <div id="mapModal" class="modal-overlay" style="display: none">
      <div
        class="modal-box"
        style="
          max-width: 95%;
          width: 600px;
          padding: 0;
          overflow: hidden;
          background: none;
          border: none;
          box-shadow: none;
        "
      >
        <div style="position: relative; border-radius: 15px; overflow: hidden">
          <button
            onclick="closeMap()"
            style="
              position: absolute;
              top: 10px;
              right: 10px;
              z-index: 1000;
              background: #ff69b4;
              color: #000;
              border: none;
              border-radius: 50%;
              width: 30px;
              height: 30px;
              font-weight: bold;
              cursor: pointer;
            "
          >
            √ó
          </button>
          <div id="userMap" style="height: 350px; border-radius: 15px"></div>
        </div>
      </div>
    </div>

    <!-- JavaScript for Mobile Menu -->
    <!-- Leaflet CSS & JS (correctly placed) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script>
      // Mobile Menu Scripts
      function toggleMobileMenu() {
        const mobileMenu = document.getElementById("mobileMenu");
        const hamburger = document.querySelector(".hamburger");
        mobileMenu.classList.toggle("active");
        hamburger.classList.toggle("active");
      }

      function closeMobileMenu() {
        const mobileMenu = document.getElementById("mobileMenu");
        const hamburger = document.querySelector(".hamburger");
        mobileMenu.classList.remove("active");
        hamburger.classList.remove("active");
      }

      document.addEventListener("click", function (event) {
        const mobileMenu = document.getElementById("mobileMenu");
        const hamburger = document.querySelector(".hamburger");
        const mobileNav = document.querySelector(".mobile-nav");

        if (
          !mobileNav.contains(event.target) &&
          !mobileMenu.contains(event.target)
        ) {
          closeMobileMenu();
        }
      });

      window.addEventListener("resize", function () {
        if (window.innerWidth > 768) {
          closeMobileMenu();
        }
      });

      // Show modal on page load
      window.onload = function () {
        document.getElementById("locationModal").style.display = "flex";
      };

      // Location Permission
      function allowLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              const lat = position.coords.latitude;
              const lon = position.coords.longitude;

              closeModal();

              // Show map
              const mapDiv = document.getElementById("userMap");
              mapDiv.style.display = "block";

              const map = L.map("userMap").setView([lat, lon], 13);
              L.tileLayer(
                "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
                  attribution: "&copy; OpenStreetMap contributors",
                }
              ).addTo(map);

              L.circleMarker([lat, lon], {
                radius: 8,
                fillColor: "#00ff9c",
                color: "#00ff9c",
                weight: 2,
                opacity: 1,
                fillOpacity: 0.9,
              })
                .addTo(map)
                .bindPopup("üìç You are here")
                .openPopup();
            },
            (error) => {
              alert("Unable to get your location.");
              closeModal();
            }
          );
        } else {
          alert("Geolocation is not supported by your browser.");
          closeModal();
        }
      }

      function closeModal() {
        document.getElementById("locationModal").style.display = "none";
      }
      function allowLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              const lat = position.coords.latitude;
              const lon = position.coords.longitude;

              closeModal();

              // Show map modal
              document.getElementById("mapModal").style.display = "flex";

              // Leaflet map setup
              const map = L.map("userMap").setView([lat, lon], 13);
              L.tileLayer(
                "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
                  attribution: "&copy; OpenStreetMap contributors",
                }
              ).addTo(map);

              const marker = L.circleMarker([lat, lon], {
                radius: 8,
                fillColor: "#00ff9c",
                color: "#00ff9c",
                weight: 2,
                opacity: 1,
                fillOpacity: 0.9,
              })
                .addTo(map)
                .bindPopup("üìç You are here")
                .openPopup();
            },
            (error) => {
              alert("Unable to get your location.");
              closeModal();
            }
          );
        } else {
          alert("Geolocation is not supported.");
          closeModal();
        }
      }

      function closeMap() {
        document.getElementById("mapModal").style.display = "none";
      }
    </script>
  </body>
</html>
